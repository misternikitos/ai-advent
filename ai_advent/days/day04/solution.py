from openai import OpenAI

from ai_advent.config import settings

client = OpenAI(
    api_key=settings.deepseek.api_key,
    base_url=str(settings.deepseek.base_url),
)

prompt = "Кто такой аналитик данных. Опиши его внешний вид и чем он питается."

temperatures = [0, 0.7, 1.2]

print(f"Промпт:\n{prompt}\n")

for temp in temperatures:
    print(f"--- Температура: {temp} ---\n")
    response = client.chat.completions.create(
        model="deepseek-chat",
        messages=[
            {"role": "user", "content": prompt},
        ],
        temperature=temp,
        stream=False,
    )
    content = response.choices[0].message.content
    print(f"Ответ:\n{content}\n")

# Вывод в консоль при запуске решения доступен в ai_advent/days/day04/console_output.md
#
# --- Анализ и выводы ---

# Сравнение ответов:
#
# 1. Точность (Accuracy):
#    - При temperature = 0 модель стремится дать наиболее вероятный и "безопасный"
#      ответ. Она обычно строго следует инструкциям (например, ограничению в 3
#      предложения).
#    - При temperature = 1.2 модель может начать игнорировать жесткие ограничения ради
#      "интересности" текста, или выдавать бессвязный текст, если температура слишком
#      высока для данной модели.
#
# 2. Креативность (Creativity):
#    - При temperature = 0 ответы часто шаблонны и предсказуемы.
#    - При temperature = 0.7 появляется баланс между логикой и новизной.
#    - При temperature = 1.2 ответы могут быть очень необычными, использовать редкие
#      слова и метафоры, но иногда теряют смысл.
#
# 3. Разнообразие (Diversity):
#    - Если запустить код несколько раз:
#      - При temperature = 0 ответ будет почти всегда одинаковым (детерминированным).
#      - При temperature = 1.2 ответы будут сильно отличаться при каждом запуске.
#
# Рекомендации (для каких задач лучше подходит каждая настройка):
#
# temperature = 0
#    - Задачи: Извлечение данных, классификация текста, написание кода, математика,
#      логические задачи.
#    - Почему: Нужна максимальная точность, детерминированность и воспроизводимость.
#      Фантазия здесь вредна.
#
# temperature = 0.7 (Стандартное значение)
#    - Задачи: Чат-боты, написание статей, саммаризация, обычное общение.
#    - Почему: Хороший баланс между связностью текста и естественностью речи.
#      Текст не выглядит "машинным", но и не уходит в бред.
#
# temperature = 1.2 (и выше)
#    - Задачи: Мозговой штурм (brainstorming), генерация идей для сюжетов, стихов,
#      необычных метафор.
#    - Почему: Позволяет модели выходить за рамки стандартных ассоциаций. Требует
#      ручного отбора удачных вариантов.
